# versions.yaml - Single source of truth for supported versions
#
# Two key fields per dependency:
#   current:         EXACT version go.mod must import (validated)
#   supported_range: Versions the generated YAML works with (documented)

# Go version (mise.toml is authoritative for tooling)
go:
  current: "1.24.13"
  # mise.toml is the source of truth for Go version

# Infrastructure dependencies
infrastructure:
  cert-manager:
    # go.mod MUST have: github.com/cert-manager/cert-manager v1.16.5
    current: "1.16.5"
    go_module: "github.com/cert-manager/cert-manager"
    # Kure generates YAML compatible with these deployed versions
    supported_range: "1.14 - 1.16"
    max_dependabot: "< 1.17"  # Dependabot ignore rule
    notes: "1.17+ requires Go 1.25"

  fluxcd:
    current: "2.6.4"
    go_module: "github.com/fluxcd/flux2/v2"
    supported_range: "2.4 - 2.6"
    max_dependabot: "< 2.7"
    notes: |
      2.7+ requires Go 1.25, tracked in #128
      image-automation-controller 1.0+ requires Go 1.25 (#171)
      All github.com/fluxcd/* packages blocked from minor/major updates
    # Additional packages in this ecosystem (same version constraint)
    related_packages:
      - "github.com/fluxcd/*"
      - "github.com/controlplaneio-fluxcd/*"

  flux-operator:
    current: "0.24.1"
    go_module: "github.com/controlplaneio-fluxcd/flux-operator"
    supported_range: "0.23 - 0.24"
    max_dependabot: "< 0.25"
    notes: "0.25+ requires Go 1.25"

  metallb:
    current: "0.15.2"
    go_module: "go.universe.tf/metallb"
    supported_range: "0.14 - 0.15"
    max_dependabot: "< 0.15.3"
    notes: "0.15.3+ requires Go 1.25 and triggers k8s.io upgrade to 0.34+ (#169)"

  external-secrets:
    current: "0.19.2"
    go_module: "github.com/external-secrets/external-secrets"
    supported_range: "0.18 - 0.19"
    max_dependabot: null  # No restriction
    notes: "Compatible with current Go version"

  controller-runtime:
    current: "0.21.0"
    go_module: "sigs.k8s.io/controller-runtime"
    supported_range: "0.19 - 0.21"
    max_dependabot: "< 0.22"
    notes: "0.22+ requires Go 1.25"

  kubernetes:
    current: "0.33.2"
    go_module: "k8s.io/api"
    # What K8s cluster versions kure-generated YAML works with
    supported_range: "1.28 - 1.33"
    notes: "Tested in CI matrix"
    related_packages:
      - "k8s.io/apimachinery"
      - "k8s.io/client-go"
      - "k8s.io/cli-runtime"
